<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=utf-8">
<title>Socket</title>
<script src="build.js"></script>
</head>
<body>
	<h1>sockets</h1>

<script>
// let's invite Firefox to the party.
if (window.MozWebSocket) {
	window.WebSocket = window.MozWebSocket;
}


socket = new WebSocket('ws://localhost:8902');
socket.onmessage = function(evt){
//	console.log("socket: on message event",evt)
	try {
		var data = JSON.parse(evt.data);
	} catch(er) {
		console.log("socket: new unparsable message: %s",evt.data)
	}
	
}

socket.onopen = function(ev) {
//	console.log("socket: opened, %o ",ev);
	console.log("socket: connected %d",ev.timeStamp);
}

window.setTimeout(function(){
	socket.send( "Thank you, Mr. server!");
},100);

window.setTimeout(function(){
	socket.send(JSON.stringify({json:true}));
},200);

</script>

</body>
</html>